unbind r
bind r source-file ~/.tmux.conf; display "Reloaded"

if-shell '[[ $(echo "$(tmux -V | cut -d" " -f2) >= 2.1" | bc) -eq 1 ]]' \
    'set -g mouse on; bind m set -g mouse on \; display "Mouse ON"; bind M set -g mouse off \; display "Mouse OFF"' \
    'set -g mode-mouse on; set -g mouse-resize-pane on; set -g mouse-select-pane on; set -g mouse-select-window on; bind m set -g mode-mouse on \; set -g mouse-resize-pane on \; set -g mouse-select-pane on \; set -g mouse-select-window on \; display "Mouse ON"; bind M set -g mode-mouse off \; set -g mouse-resize-pane off \; set -g mouse-select-pane off \; set -g mouse-select-window off \; display "Mouse OFF"'

# Smart pane switching with awareness of vim splits
# See: https://github.com/christoomey/vim-tmux-navigator
is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?x?)(diff)?$"'
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

if-shell '[  -e /usr/bin/powerline-daemon ]' \
    'run-shell "powerline-daemon -q"; source "/usr/share/powerline/bindings/tmux/powerline.conf"' \
    "setw -g clock-mode-colour colour135 ; setw -g mode-attr bold ; setw -g mode-fg colour196 ; setw -g mode-bg colour238; set  -g pane-border-bg colour235 ; set  -g pane-border-fg colour238 ; set  -g pane-active-border-bg colour236 ; set  -g pane-active-border-fg colour199; set  -g status-position bottom ; set  -g status-bg colour234 ; set  -g status-fg colour137 ; set  -g status-attr dim ; set  -g status-left '#[fg=colour255,bg=colour53,bold] #S@#H #[bg=colour234] ' ; set  -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S ' ; set  -g status-right-length 50 ; set  -g status-left-length 50; setw -g window-status-current-fg colour170 ; setw -g window-status-current-bg colour238 ; setw -g window-status-current-attr bold ; setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour170]#F '; setw -g window-status-fg colour138 ; setw -g window-status-bg colour235 ; setw -g window-status-attr none ; setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '; setw -g window-status-bell-attr bold ; setw -g window-status-bell-fg colour255 ; setw -g window-status-bell-bg colour1 ; set  -g message-attr bold ; set  -g message-fg colour232 ; set  -g message-bg colour166"

# remember more
set -g history-limit 10000

# allow more colors
set -g default-terminal "screen-256color"

# use e for session menu
unbind e
bind e choose-session

# use vi keys in copy mode
setw -g mode-keys vi
